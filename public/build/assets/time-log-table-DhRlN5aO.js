import{r as u,j as e,b as D,L as S}from"./app-Bk4PR63W.js";import{t as C}from"./index-D-Gk-yT4.js";import{B as g}from"./button-BGAiRGZg.js";import{D as L,h as E,a as F,c as M,d as P,g as B,i as H}from"./master-layout-DChFziky.js";import{D as s,a as R,b as A,c as O}from"./dropdown-menu-DdvMI060.js";import{T as f}from"./trash-2-C7f2dPei.js";import{T as I}from"./time-log-details-sheet-DzzVx0s2.js";import{B as j}from"./badge-BNr9aysp.js";import{T as U,a as V,b as G,c as a,d as q,e as z,f as t}from"./table-B_Bh9XXk.js";import{b as $}from"./utils-DKW5XViW.js";import{E as J}from"./ellipsis-vertical-1uG8dloI.js";import{G as K}from"./glasses-BGYPtpd2.js";import{S as c}from"./square-pen-Ch07ck8l.js";function Q({timeLogId:m,onDeleteSuccess:l}){const[o,n]=u.useState(!1),x=i=>{i.preventDefault(),n(!0),D.delete(route("time-log.destroy",m),{preserveScroll:!0,onSuccess:()=>{C.success("Time log deleted successfully"),l&&l()},onFinish:()=>n(!1)})};return e.jsxs(L,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(s,{className:"group cursor-pointer",onSelect:i=>{i.preventDefault()},children:[e.jsx(f,{className:"h-4 w-4 text-red-600 group-hover:text-red-700 dark:text-red-400 dark:group-hover:text-red-300"}),e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"Delete"})]})}),e.jsxs(F,{className:"border-neutral-200 bg-white dark:border-neutral-700 dark:bg-neutral-800",children:[e.jsx(M,{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:"Are you sure you want to delete this time log?"}),e.jsx(P,{className:"text-neutral-600 dark:text-neutral-400",children:"Once the time log is deleted, all of its data will be permanently removed. This action cannot be undone."}),e.jsx("form",{className:"space-y-6",onSubmit:x,children:e.jsxs(B,{className:"gap-2",children:[e.jsx(H,{asChild:!0,children:e.jsx(g,{variant:"secondary",className:"border-neutral-200 bg-white text-neutral-700 hover:bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"})}),e.jsx(g,{variant:"destructive",disabled:o,className:"bg-red-600 text-white transition-colors duration-200 hover:bg-red-700 dark:bg-red-700/80 dark:hover:bg-red-700",asChild:!0,children:e.jsx("button",{type:"submit",children:"Delete Time Log"})})]})})]})]})}function xe({timeLogs:m,showTeamMember:l=!1,showMember:o=!1,showActions:n=!1,showCheckboxes:x=!1,showProject:i=!0,showEditDelete:k=!0,selectedLogs:N=[],onSelectLog:p,onEdit:h}){const[v,_]=u.useState(null),[w,y]=u.useState(!1),b=l||o,T=r=>{_(r),y(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(U,{className:"w-full",children:[e.jsx(V,{children:e.jsxs(G,{children:[x&&e.jsx(a,{className:"dark:bg-gray-750 w-[50px] bg-gray-50 text-xs font-medium text-gray-500 dark:text-gray-400",children:"Select"}),b&&e.jsx(a,{className:"dark:bg-gray-750 bg-gray-50 text-xs font-medium text-gray-500 dark:text-gray-400",children:"Team Member"}),e.jsx(a,{className:"dark:bg-gray-750 bg-gray-50 text-xs font-medium text-gray-500 dark:text-gray-400",children:"Entry"}),e.jsx(a,{className:"dark:bg-gray-750 bg-gray-50 text-xs font-medium text-gray-500 dark:text-gray-400",children:"Hours"}),e.jsx(a,{className:"dark:bg-gray-750 bg-gray-50 text-xs font-medium text-gray-500 dark:text-gray-400",children:"Hourly Rate"}),e.jsx(a,{className:"dark:bg-gray-750 bg-gray-50 text-xs font-medium text-gray-500 dark:text-gray-400",children:"Paid Amount"}),e.jsx(a,{className:"dark:bg-gray-750 bg-gray-50 text-xs font-medium text-gray-500 dark:text-gray-400",children:"Status"}),n&&e.jsx(a,{className:"dark:bg-gray-750 bg-gray-50 text-right text-xs font-medium text-gray-500 dark:text-gray-400",children:"Actions"})]})}),e.jsx(q,{children:m.map(r=>e.jsxs(z,{className:"dark:hover:bg-gray-750 border-b border-gray-100 hover:bg-gray-50 dark:border-gray-700",children:[x&&e.jsx(t,{children:e.jsx("input",{type:"checkbox",checked:N.includes(r.id),onChange:d=>p&&p(r.id,d.target.checked),disabled:r.is_paid||!r.start_timestamp||!r.end_timestamp||r.status!=="approved"||r.user_non_monetary||r.non_billable,title:!r.start_timestamp||!r.end_timestamp?"Time logs without both start and end timestamps cannot be marked as paid":r.status!=="approved"?"Time logs must be approved before they can be marked as paid":r.non_billable?"Non-billable time logs cannot be marked as paid":"",className:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"})}),b&&e.jsx(t,{className:"font-medium text-gray-800 dark:text-gray-200",children:r.user_name}),e.jsxs(t,{className:"font-medium text-gray-800 dark:text-gray-200",children:[$(r.start_timestamp,r.end_timestamp),e.jsx("br",{}),e.jsxs("div",{className:"flex flex-wrap items-center gap-1",children:[i&&e.jsx("small",{className:"mr-1",children:r.project_name||"No Project"}),r.non_billable&&e.jsx(j,{className:"bg-purple-100 text-[10px] font-medium text-purple-800 dark:bg-purple-900 dark:text-purple-100",children:"Non-billable"}),r.tags&&r.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:r.tags.map(d=>e.jsx(j,{className:"text-xs",style:{backgroundColor:d.color,color:"#fff"},children:d.name},d.id))})]})]}),e.jsx(t,{className:"text-sm text-gray-700 dark:text-gray-300",children:e.jsx("span",{className:"inline-flex items-center bg-primary/10 px-2 py-0.5 text-xs font-medium text-primary",children:r.duration})}),e.jsx(t,{className:"text-sm text-gray-700 dark:text-gray-300",children:r.hourly_rate!==void 0&&r.hourly_rate!==null&&typeof r.hourly_rate=="number"&&r.hourly_rate>0?e.jsxs("span",{className:"inline-flex items-center bg-blue-100 px-2 py-0.5 text-xs font-medium text-blue-800 dark:bg-blue-900 dark:text-blue-100",children:[r.currency||"USD"," ",r.hourly_rate.toFixed(2)]}):e.jsx("span",{className:"text-gray-500",children:"-"})}),e.jsx(t,{className:"text-sm text-gray-700 dark:text-gray-300",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:`inline-flex items-center ${r.is_paid?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100":"bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300"} px-2 py-0.5 text-xs font-medium`,children:[r.currency||"USD"," ",r.paid_amount!==void 0&&r.paid_amount!==null&&typeof r.paid_amount=="number"&&r.paid_amount>0?r.paid_amount.toFixed(2):r.hourly_rate!==void 0&&r.hourly_rate!==null&&typeof r.hourly_rate=="number"&&r.hourly_rate>0&&r.duration?(r.hourly_rate*r.duration).toFixed(2):"0.00"]}),r.hourly_rate!==void 0&&r.hourly_rate!==null&&typeof r.hourly_rate=="number"&&r.hourly_rate>0&&(r.is_paid?e.jsx("span",{className:"inline-flex items-center bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800 dark:bg-green-900 dark:text-green-100",children:"Paid"}):e.jsx("span",{className:"inline-flex items-center bg-yellow-100 px-2 py-0.5 text-xs font-medium text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100",children:"Unpaid"}))]})}),e.jsx(t,{className:"text-sm text-gray-700 dark:text-gray-300",children:r.status==="approved"?e.jsx("span",{className:"inline-flex items-center bg-green-100 px-2 py-0.5 text-xs font-medium text-green-800 dark:bg-green-900 dark:text-green-100",children:"Approved"}):r.status==="rejected"?e.jsx("span",{className:"inline-flex items-center bg-red-100 px-2 py-0.5 text-xs font-medium text-red-800 dark:bg-red-900 dark:text-red-100",children:"Rejected"}):e.jsx("span",{className:"inline-flex items-center bg-gray-100 px-2 py-0.5 text-xs font-medium text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:"Pending"})}),n&&e.jsx(t,{className:"text-right",children:e.jsxs(R,{children:[e.jsx(A,{asChild:!0,children:e.jsx(g,{variant:"ghost",size:"icon",className:"h-8 w-8 p-0 text-gray-500 hover:bg-gray-100 hover:text-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-gray-200",children:e.jsx(J,{className:"h-4 w-4"})})}),e.jsxs(O,{align:"end",className:"w-48",children:[e.jsxs(s,{className:"group cursor-pointer",onSelect:()=>T(r),children:[e.jsx(K,{className:"mr-2 h-4 w-4 text-gray-500 group-hover:text-gray-700 dark:text-gray-400 dark:group-hover:text-gray-300"}),e.jsx("span",{children:"View"})]}),k&&e.jsxs(e.Fragment,{children:[r.is_paid?e.jsxs(s,{disabled:!0,className:"cursor-not-allowed opacity-50",children:[e.jsx(c,{className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{children:"Edit Log"})]}):h?e.jsxs(s,{className:"group cursor-pointer",onSelect:()=>h(r),children:[e.jsx(c,{className:"mr-2 h-4 w-4 text-gray-500 group-hover:text-gray-700 dark:text-gray-400 dark:group-hover:text-gray-300"}),e.jsx("span",{children:"Edit"})]}):e.jsx(S,{href:route("time-log.edit",r.id),children:e.jsxs(s,{className:"group cursor-pointer",children:[e.jsx(c,{className:"mr-2 h-4 w-4 text-gray-500 group-hover:text-gray-700 dark:text-gray-400 dark:group-hover:text-gray-300"}),e.jsx("span",{children:"Edit"})]})}),r.is_paid?e.jsxs(s,{disabled:!0,className:"cursor-not-allowed opacity-50",children:[e.jsx(f,{className:"mr-2 h-4 w-4 text-gray-400"}),e.jsx("span",{children:"Delete"})]}):e.jsx(Q,{timeLogId:r.id})]})]})]})})]},r.id))})]}),e.jsx(I,{timeLog:v,open:w,onOpenChange:y})]})}export{xe as T};
