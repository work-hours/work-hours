import{r as o,a as v,j as e,H as w,L as C}from"./app-CE94QcfB.js";import{B as P}from"./badge-Do30HICq.js";import{B as d}from"./button-CSc-Cw7e.js";import{C as n,a as J,b as S,c as L,d as x}from"./card-BF0DTRGt.js";import{I as R}from"./label-DISzI683.js";import{M as I,S as $}from"./master-layout-tsVhh441.js";import{S as q}from"./separator-Ypd1NZ1n.js";import{t as E}from"./index-C5Svuudg.js";import{c as D}from"./createLucideIcon-D9NWueAg.js";import{A as V}from"./arrow-left-DJNiNUOf.js";import{S as Y}from"./search-4eIqUzEe.js";import{L as B}from"./loader-circle-D1ym3s0F.js";import{E as G}from"./external-link-CXzUVR5e.js";/* empty css            */import"./index-Becnjq-x.js";import"./utils-DKW5XViW.js";import"./index-DkUby8a3.js";import"./index-BC-ip4sp.js";import"./cookie-consent-CR7wTwap.js";import"./index-CSGd7LPk.js";import"./index-gOG35dkf.js";import"./index-OH_msQzS.js";import"./index-DmtIMq0f.js";import"./floating-ui.react-dom-ODH34Sgt.js";import"./index-DwOlKDQm.js";import"./select-D_MCfbK8.js";import"./index-DssjTqXu.js";import"./chevron-up-BMiBX3If.js";import"./TaskController-DRILXs0Z.js";import"./jira-icon-pYe84P2s.js";import"./x-BKkU3iVo.js";import"./index-fJEy3cUu.js";import"./trash-2-BRVXkUm4.js";import"./sheet-0Ok6l0ab.js";import"./plus-CeOzYAGh.js";import"./clock-CV0oisNo.js";import"./appearance-dropdown-CplWtr1N.js";import"./dropdown-menu-Dy5Hq4rj.js";import"./index-C7hwMZoy.js";import"./circle-alert-5FNlBjr8.js";import"./checkbox-TCMWq4Ph.js";import"./chevron-right-BzTA_0kR.js";import"./settings-Bjly2KGq.js";import"./bell-CbXQzXBs.js";import"./users-Dah8edja.js";import"./app-logo-icon-DHSG1eGj.js";import"./github-CZtBj8bQ.js";import"./log-out-BQwzfcg9.js";import"./building-BzSs3yfb.js";import"./projector-C9mKpjiA.js";import"./clipboard-list-BccoXVyt.js";import"./timer-BE1bBtuS.js";import"./file-text-D51RJe6F.js";import"./square-check-big-B68kPrbC.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],l=D("Shield",O),A=[{title:"Integration",href:"/integration"},{title:"Jira Projects",href:"/jira/projects"}];function Qe(){const[F,g]=o.useState([]),[H,y]=o.useState([]),[K,p]=o.useState(!0),[h,j]=o.useState(null),[M,u]=o.useState(!0),[a,f]=o.useState(""),m=(r,t=!1)=>{t?E.error(r):E.success(r)};o.useEffect(()=>{T().then()},[]);const T=async()=>{var r,t,c,s,N,k;p(!0);try{const i=await v.get(route("jira.projects.list"));g(i.data.projects),y(i.data.importedProjectKeys||[]),u(!0)}catch(i){console.error("Error fetching projects:",i),((r=i.response)==null?void 0:r.status)===400&&((s=(c=(t=i.response)==null?void 0:t.data)==null?void 0:c.message)!=null&&s.includes("credentials"))?u(!1):m(((k=(N=i.response)==null?void 0:N.data)==null?void 0:k.message)||"Could not fetch projects from Jira.",!0),g([])}finally{p(!1)}},_=async r=>{var t,c;j(r.key);try{await v.post(route("jira.projects.import"),{key:r.key,name:r.name,description:r.description}),m(`Successfully imported ${r.name} and its issues.`),y(s=>[...s,r.key])}catch(s){console.error("Error importing project:",s),m(((c=(t=s.response)==null?void 0:t.data)==null?void 0:c.message)||`Failed to import ${r.name}.`,!0)}finally{j(null)}},z=r=>H.includes(r);if(!M)return e.jsxs(I,{breadcrumbs:A,children:[e.jsx(w,{title:"Jira Projects"}),e.jsxs("div",{className:"mx-auto flex flex-col gap-4 p-4 md:w-10/12",children:[e.jsx("section",{className:"mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2 dark:bg-gray-700",children:e.jsx(l,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-medium tracking-tight text-gray-800 dark:text-gray-100",children:"Jira Projects"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Connect and manage your Jira projects"})]})]})}),e.jsxs(n,{className:"overflow-hidden bg-white shadow-sm transition-all dark:bg-gray-800",children:[e.jsx(J,{className:"border-b border-gray-100 p-4 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2 dark:bg-gray-700",children:e.jsx(l,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx(S,{className:"text-lg font-medium text-gray-800 dark:text-gray-100",children:"Jira Integration"}),e.jsx(L,{className:"text-sm text-gray-500 dark:text-gray-400",children:"Connect your Jira account to access your projects"})]})]})}),e.jsx(x,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[e.jsx("div",{className:"mb-6 rounded-full bg-yellow-100 p-4 dark:bg-yellow-900/50",children:e.jsx(l,{className:"h-10 w-10 text-yellow-600 dark:text-yellow-200"})}),e.jsx("h3",{className:"mb-2 text-xl font-medium text-gray-800 dark:text-gray-100",children:"Jira Credentials Required"}),e.jsx("p",{className:"mb-6 max-w-md text-center text-gray-500 dark:text-gray-400",children:"You need to connect your Jira account before you can view and import projects."}),e.jsx(d,{asChild:!0,className:"bg-gray-900 text-sm hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600",children:e.jsx(C,{href:route("jira.connect"),children:"Connect to Jira"})})]})})]})]})]});const b=F.filter(r=>r.name.toLowerCase().includes(a.toLowerCase())||r.description&&r.description.toLowerCase().includes(a.toLowerCase())||r.key.toLowerCase().includes(a.toLowerCase()));return e.jsxs(I,{breadcrumbs:A,children:[e.jsx(w,{title:"Jira Projects"}),e.jsxs("div",{className:"mx-auto flex flex-col gap-4 p-4 md:w-10/12",children:[e.jsx("section",{className:"mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2 dark:bg-gray-700",children:e.jsx(l,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-medium tracking-tight text-gray-800 dark:text-gray-100",children:"Jira Projects"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Browse and import your Jira projects"})]})]})}),e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(d,{variant:"outline",asChild:!0,className:"border-gray-200 bg-white text-gray-800 hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:hover:bg-gray-700",children:e.jsxs(C,{href:route("jira.connect"),children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Change Credentials"]})})}),e.jsx("div",{className:"flex flex-col space-y-6",children:e.jsxs(n,{className:"overflow-hidden bg-white shadow-sm transition-all dark:bg-gray-800",children:[e.jsx(J,{className:"border-b border-gray-100 p-4 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2 dark:bg-gray-700",children:e.jsx(l,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx(S,{className:"text-lg font-medium text-gray-800 dark:text-gray-100",children:"Import Jira Projects"}),e.jsx(L,{className:"text-sm text-gray-500 dark:text-gray-400",children:"Browse and select Jira projects to import into the system"})]})]})}),e.jsxs(x,{className:"p-4",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute top-2.5 left-3 h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsx(R,{type:"search",placeholder:"Search projects...",className:"h-10 border-gray-200 bg-white pl-9 text-gray-800 placeholder:text-gray-500 focus-visible:ring-primary/70 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:placeholder:text-gray-400",value:a,onChange:r=>f(r.target.value)})]})}),K?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"mb-6 rounded-full bg-primary/10 p-4",children:e.jsx(B,{className:"h-10 w-10 animate-spin text-primary"})}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-800 dark:text-gray-100",children:"Loading Projects"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fetching projects from Jira..."})]}):b.length>0?e.jsx($,{className:"h-[450px] pr-2",children:e.jsx("div",{className:"space-y-4",children:b.map(r=>e.jsx(n,{className:"overflow-hidden border border-gray-100 bg-white shadow-sm transition-all hover:shadow-md dark:border-gray-700 dark:bg-gray-800",children:e.jsxs(x,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-lg font-medium text-gray-800 dark:text-gray-100",children:[e.jsx(l,{className:"h-4 w-4 text-primary"}),r.name,e.jsx(P,{variant:"outline",className:"ml-1 border-blue-200 bg-blue-100 text-xs font-normal text-blue-700 dark:border-blue-800 dark:bg-blue-900 dark:text-blue-300",children:r.key})]}),r.description&&e.jsx("p",{className:"mt-2 line-clamp-2 text-sm text-gray-500 dark:text-gray-400",children:r.description})]}),e.jsx("div",{className:"flex items-center gap-2",children:z(r.key)?e.jsx(P,{variant:"outline",className:"mr-2 border-green-300/50 bg-transparent p-2 text-green-700 dark:text-green-300",children:"Imported"}):e.jsx(d,{size:"sm",className:"bg-gray-900 text-sm hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600",onClick:()=>_(r),disabled:h===r.key,children:h===r.key?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-1 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mr-1 h-4 w-4"}),"Import"]})})})]}),e.jsx(q,{className:"my-3"}),e.jsx("div",{className:"flex items-center justify-between text-xs",children:e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Project Key: ",r.key]})})]})},r.id))})}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"mb-6 rounded-full bg-gray-100 p-4 dark:bg-gray-700",children:e.jsx(l,{className:"h-12 w-12 text-gray-600 dark:text-gray-300"})}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-800 dark:text-gray-100",children:a?"No projects match your search":"No projects available to import"}),e.jsx("p",{className:"max-w-md text-center text-sm text-gray-500 dark:text-gray-400",children:a?"Try a different search term or clear your search to see all projects.":"All your Jira projects may already be imported or no projects were found."}),a&&e.jsx(d,{onClick:()=>f(""),className:"mt-4 bg-gray-900 text-sm hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600",children:"Clear Search"})]})]})]})})]})]})}export{Qe as default};
