import{j as e}from"./app-CE94QcfB.js";import{t as m,f as d}from"./format-DaJbwain.js";import{e as $}from"./eachDayOfInterval-D6ULaKSU.js";import{C as D}from"./clock-CV0oisNo.js";import{C as F}from"./calendar-days-BgdjpWi0.js";import{C as O}from"./calendar-C8zGel57.js";import{p as f,i as H}from"./parseISO-DbJI0UL_.js";/* empty css            */import"./createLucideIcon-D9NWueAg.js";function Y(n){const r=m(n),o=r.getMonth();return r.setFullYear(r.getFullYear(),o+1,0),r.setHours(23,59,59,999),r}function _(n){const r=m(n);return r.setDate(1),r.setHours(0,0,0,0),r}function E(n,r){const o=m(n),g=m(r);return o.getFullYear()===g.getFullYear()&&o.getMonth()===g.getMonth()}function P({timeLogs:n,date:r,onTimeLogClick:o,onSwitchToDay:g}){const x=f(r),y=_(x),h=Y(x),w=$({start:y,end:h}),p=y.getDay(),b=[];for(let t=0;t<p;t++){const s=new Date(y);s.setDate(s.getDate()-(p-t)),b.push(s)}const M=h.getDay(),j=[];for(let t=1;t<7-M;t++){const s=new Date(h);s.setDate(s.getDate()+t),j.push(s)}const C=[...b,...w,...j],l={};return n.forEach(t=>{const s=f(t.start),c=d(s,"yyyy-MM-dd");l[c]||(l[c]=[]),l[c].push(t)}),e.jsxs("div",{className:"overflow-hidden rounded-lg bg-white shadow dark:bg-gray-800",children:[e.jsxs("div",{className:"grid grid-cols-7 gap-px bg-gray-200 dark:bg-gray-700",children:[e.jsx("div",{className:"dark:bg-gray-750 bg-gray-100 p-3 text-center font-medium",children:"Sun"}),e.jsx("div",{className:"dark:bg-gray-750 bg-gray-100 p-3 text-center font-medium",children:"Mon"}),e.jsx("div",{className:"dark:bg-gray-750 bg-gray-100 p-3 text-center font-medium",children:"Tue"}),e.jsx("div",{className:"dark:bg-gray-750 bg-gray-100 p-3 text-center font-medium",children:"Wed"}),e.jsx("div",{className:"dark:bg-gray-750 bg-gray-100 p-3 text-center font-medium",children:"Thu"}),e.jsx("div",{className:"dark:bg-gray-750 bg-gray-100 p-3 text-center font-medium",children:"Fri"}),e.jsx("div",{className:"dark:bg-gray-750 bg-gray-100 p-3 text-center font-medium",children:"Sat"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-px bg-gray-200 dark:bg-gray-700",children:C.map((t,s)=>{const c=d(t,"yyyy-MM-dd"),v=E(t,x),k=H(t,new Date),i=l[c]||[],N=i.reduce((a,u)=>a+u.duration,0),S=i.length>0;return e.jsxs("div",{className:`min-h-[140px] bg-white p-3 transition-colors dark:bg-gray-800 ${v?"":"opacity-40"} ${S?"dark:hover:bg-gray-750 hover:bg-gray-50":""}`,children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsx("div",{className:` ${k?"bg-blue-500 text-white":"text-gray-700 dark:text-gray-200"} ${k?"flex h-8 w-8 items-center justify-center rounded-full":""} font-semibold`,children:d(t,"d")}),e.jsxs("div",{className:"flex items-center space-x-2",children:[N>0&&e.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400",children:[e.jsx(D,{className:"mr-1 h-3 w-3"}),N.toFixed(1),"h"]}),e.jsx("button",{className:`flex cursor-pointer items-center justify-center rounded-md p-1 text-xs transition-opacity hover:bg-gray-100 dark:hover:bg-gray-700 ${v?"text-blue-500 dark:text-blue-400":"text-gray-500 opacity-60 dark:text-gray-400"}`,onClick:a=>{a.preventDefault(),a.stopPropagation();const u=d(t,"yyyy-MM-dd");window.location.href=`/calendar?view=day&date=${u}`},title:"View day",children:e.jsx(F,{className:"h-3.5 w-3.5"})})]})]}),e.jsxs("div",{className:"max-h-[90px] space-y-1.5 overflow-y-auto",children:[i.slice(0,3).map(a=>e.jsxs("div",{className:"flex cursor-pointer flex-col rounded-md p-1.5 text-xs transition-opacity hover:opacity-80",style:{backgroundColor:a.project.color+"26",borderLeft:`3px solid ${a.project.color}`},onClick:()=>o(a.id),children:[e.jsx("div",{className:"truncate font-medium",children:a.project.name}),e.jsxs("div",{className:"flex items-center justify-between text-gray-600 dark:text-gray-300",children:[e.jsx("div",{className:"truncate",children:d(f(a.start),"HH:mm")}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(D,{className:"mr-1 h-3 w-3"}),a.duration,"h"]})]}),a.task&&e.jsxs("div",{className:"mt-0.5 flex items-center truncate text-gray-500 dark:text-gray-400",children:[e.jsx(O,{className:"mr-1 h-3 w-3"}),a.task.title]})]},a.id)),i.length>3&&e.jsxs("div",{className:"cursor-pointer rounded-md bg-gray-100 px-2 py-1 text-center text-xs text-gray-600 transition-colors hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",onClick:()=>o(i[3].id),children:["+",i.length-3," more"]})]})]},s)})})]})}export{P as default};
