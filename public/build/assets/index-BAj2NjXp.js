import{r as n,j as e,a as j,u as $,H as Q,L as W}from"./app-Bk4PR63W.js";import{t as i}from"./index-D-Gk-yT4.js";import{B as s}from"./button-BGAiRGZg.js";import{D as y,h as X,a as f,c as N,d as Z,g as v,i as ee,M as ae,b as T}from"./master-layout-DChFziky.js";import{D as q,a as re,b as te,c as se}from"./dropdown-menu-DdvMI060.js";import{T as Y}from"./trash-2-C7f2dPei.js";import{C as le,a as ne,b as ie,c as de,d as oe}from"./card-Dtas3RKB.js";import{L as S,I as F}from"./label-HoiQ3GNm.js";import{P as H}from"./plus-p8BKPWNs.js";import{E as ce}from"./ellipsis-vertical-1uG8dloI.js";import{S as me}from"./square-pen-Ch07ck8l.js";import{L as E}from"./loader-circle-BCYeDwOj.js";import{S as P}from"./save-9NB0FlW1.js";/* empty css            */import"./index-D-w6wlEG.js";import"./index-DDqfYr5D.js";import"./utils-DKW5XViW.js";import"./cookie-consent-4J8V3XdM.js";import"./index-BsY2LpXN.js";import"./index-D5x193o-.js";import"./index-Dely6azp.js";import"./index-DiDFMmY4.js";import"./index-C79L9l-a.js";import"./floating-ui.react-dom-8ikc8Qbx.js";import"./index-BJl2vPHw.js";import"./select-BTxuEGZI.js";import"./index-CPvS59-d.js";import"./createLucideIcon-CdLL0xzd.js";import"./chevron-up-F-D43jrY.js";import"./TaskController-DRILXs0Z.js";import"./jira-icon-wsasIrn-.js";import"./x-Dz3a5Yj_.js";import"./index-DDNv-7cB.js";import"./sheet-D7dB8w4W.js";import"./clock-oQTHBRij.js";import"./appearance-dropdown-mVcvt_IG.js";import"./circle-alert-BqzIHG1p.js";import"./checkbox-DLdSU6vz.js";import"./badge-BNr9aysp.js";import"./chevron-right-BUIh066M.js";import"./settings-DsZ09whw.js";import"./bell-CQjVsOHt.js";import"./users-DZUcVCZB.js";import"./app-logo-icon-CFfAIG7o.js";import"./github-DB_zkOOK.js";import"./log-out-CHwRCYXF.js";import"./building-b-lKGHwq.js";import"./projector-DmVTEmlk.js";import"./clipboard-list-CMM2SLJn.js";import"./timer-CKwyTId6.js";import"./file-text-BEAzekmp.js";import"./square-check-big-BqCCrkHI.js";import"./index-B_GyHV6l.js";function xe({tagId:r,tagName:u,onDeleteSuccess:d}){const[k,m]=n.useState(!1),w=async l=>{l.preventDefault(),m(!0);try{await j.delete(`/tags/${r}`),i.success("Tag deleted successfully"),d&&await d()}catch(h){i.error("Failed to delete tag"),console.error(h)}finally{m(!1)}};return e.jsxs(y,{children:[e.jsx(X,{asChild:!0,children:e.jsxs(q,{className:"group cursor-pointer",onSelect:l=>{l.preventDefault()},children:[e.jsx(Y,{className:"h-4 w-4 text-red-600 group-hover:text-red-700 dark:text-red-400 dark:group-hover:text-red-300"}),e.jsx("span",{className:"text-red-600 dark:text-red-400",children:"Delete"})]})}),e.jsxs(f,{className:"border-neutral-200 bg-white dark:border-neutral-700 dark:bg-neutral-800",children:[e.jsxs(N,{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:["Are you sure you want to delete ",u?`"${u}"`:"this tag","?"]}),e.jsx(Z,{className:"text-neutral-600 dark:text-neutral-400",children:"Once the tag is deleted, it will be removed from all time logs. This action cannot be undone."}),e.jsx("form",{className:"space-y-6",onSubmit:w,children:e.jsxs(v,{className:"gap-2",children:[e.jsx(ee,{asChild:!0,children:e.jsx(s,{variant:"secondary",className:"border-neutral-200 bg-white text-neutral-700 hover:bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"})}),e.jsx(s,{variant:"destructive",disabled:k,className:"bg-red-600 text-white transition-colors duration-200 hover:bg-red-700 dark:bg-red-700/80 dark:hover:bg-red-700",asChild:!0,children:e.jsx("button",{type:"submit",children:"Delete Tag"})})]})})]})]})}function xa({tags:r}){var _;const[u,d]=n.useState(!1),[k,m]=n.useState(!1),[w,l]=n.useState(!1),[h,L]=n.useState(null),[x,B]=n.useState(null),[t,g]=n.useState(!1),[o,p]=n.useState((r==null?void 0:r.data)||[]),{data:D,setData:U,reset:A,errors:M}=$({name:""}),{data:b,setData:C,errors:O}=$({name:"",color:""}),I=()=>{A(),d(!0)},z=a=>{L(a),C({name:a.name,color:a.color}),l(!0)},R=async()=>{g(!0);try{const a=await j.post("/tags",D);p([...o,a.data]),d(!1),A(),i.success("Tag created successfully")}catch(a){i.error("Failed to create tag"),console.error(a)}finally{g(!1)}},V=async()=>{if(h){g(!0);try{const a=await j.put(`/tags/${h.id}`,b);p(o.map(c=>c.id===h.id?{...c,name:a.data.name,color:a.data.color}:c)),l(!1),L(null),i.success("Tag updated successfully")}catch(a){i.error("Failed to update tag"),console.error(a)}finally{g(!1)}}},G=async()=>{if(x){g(!0);try{await j.delete(`/tags/${x.id}`),p(o.filter(a=>a.id!==x.id)),m(!1),B(null),i.success("Tag deleted successfully")}catch(a){i.error("Failed to delete tag"),console.error(a)}finally{g(!1)}}},J=[{title:"Tags",href:"/tags"}];return e.jsxs(ae,{breadcrumbs:J,children:[e.jsx(Q,{title:"Manage Tags"}),e.jsxs("div",{className:"mx-auto flex flex-col gap-4 p-4",children:[e.jsxs("section",{className:"mb-2",children:[e.jsx("div",{className:"mb-2 flex items-center justify-between",children:e.jsx("h1",{className:"text-2xl font-medium tracking-tight text-gray-800 dark:text-gray-100",children:"Tag Management"})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Manage your tags for time logs and projects"}),e.jsx("div",{className:"mt-2 flex items-center justify-end",children:e.jsxs(s,{onClick:I,className:"flex items-center gap-2 bg-gray-900 text-sm hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:"Add new Tag"})]})})]}),e.jsxs(le,{className:"overflow-hidden bg-white shadow-sm transition-all dark:bg-gray-800",children:[e.jsx(ne,{className:"border-b border-gray-100 p-4 dark:border-gray-700",children:e.jsx("div",{className:"flex flex-col space-y-4 sm:flex-row sm:items-center sm:justify-between sm:space-y-0",children:e.jsxs("div",{children:[e.jsx(ie,{className:"text-lg font-medium text-gray-800 dark:text-gray-100",children:"Your Tags"}),e.jsxs(de,{className:"text-sm text-gray-500 dark:text-gray-400",children:["You have ",r.total," ",(r.total||0)===1?"tag":"tags"]})]})})}),e.jsxs(oe,{className:"p-0",children:[Array.isArray(o)&&o.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[e.jsx("p",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:"You don't have any tags yet."}),e.jsxs(s,{onClick:I,className:"flex items-center gap-2 bg-gray-900 text-sm hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600",children:[e.jsx(H,{className:"h-4 w-4"}),e.jsx("span",{children:"Add new Tag"})]})]}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"bg-gray-50 px-6 py-3 text-xs font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:"Tag Name"}),e.jsx("th",{className:"bg-gray-50 px-6 py-3 text-right text-xs font-medium text-gray-500 dark:bg-gray-800 dark:text-gray-400",children:"Actions"})]})}),e.jsx("tbody",{children:Array.isArray(o)?o.map(a=>e.jsxs("tr",{className:"dark:hover:bg-gray-750 border-b border-gray-100 bg-white hover:bg-gray-50 dark:border-gray-700 dark:bg-gray-900",children:[e.jsx("td",{className:"px-6 py-4 font-medium text-gray-900 dark:text-white",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-4 w-4 rounded-full",style:{backgroundColor:a.color||"#6366f1"}}),a.name]})}),e.jsx("td",{className:"px-6 py-4 text-right",children:e.jsxs(re,{children:[e.jsx(te,{asChild:!0,children:e.jsx(s,{variant:"ghost",size:"icon",className:"h-8 w-8 p-0 text-gray-500 hover:bg-gray-100 dark:text-gray-400 dark:hover:bg-gray-700",children:e.jsx(ce,{className:"h-4 w-4"})})}),e.jsxs(se,{align:"end",className:"w-48",children:[e.jsxs(q,{onClick:()=>z(a),className:"group cursor-pointer",children:[e.jsx(me,{className:"h-4 w-4 text-gray-500 group-hover:text-gray-700 dark:text-gray-400 dark:group-hover:text-gray-300"}),e.jsx("span",{children:"Edit"})]}),e.jsx(xe,{tagId:a.id,tagName:a.name,onDeleteSuccess:async()=>{p(c=>c.filter(K=>K.id!==a.id))}})]})]})})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:2,className:"px-6 py-4 text-center text-gray-500",children:"No tags available"})})})]})}),r.last_page>1&&e.jsxs("div",{className:"mt-4 flex items-center justify-between border-t pt-4",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Showing ",e.jsx("span",{className:"font-medium",children:r==null?void 0:r.current_page})," of"," ",e.jsx("span",{className:"font-medium",children:r==null?void 0:r.last_page})," pages"]}),e.jsx("div",{className:"flex space-x-2",children:(_=r.links)==null?void 0:_.map((a,c)=>a.label==="&laquo; Previous"||a.label==="Next &raquo;"?null:e.jsx(W,{href:a.url||"#",className:`rounded px-3 py-1 ${a.active?"bg-blue-600 text-white":"bg-white text-gray-700 hover:bg-gray-100"} ${a.url?"":"cursor-not-allowed opacity-50"}`,children:e.jsx("span",{dangerouslySetInnerHTML:{__html:a.label}})},c))})]})]})]})]}),e.jsx(y,{open:u,onOpenChange:d,children:e.jsxs(f,{className:"border-neutral-200 bg-white dark:border-neutral-700 dark:bg-neutral-800",children:[e.jsx(T,{children:e.jsx(N,{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:"Create New Tag"})}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),R().then()},children:[e.jsx("div",{className:"grid gap-4 py-4",children:e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"name",children:"Tag Name"}),e.jsx(F,{id:"name",value:D.name,onChange:a=>U("name",a.target.value),placeholder:"Enter tag name",disabled:t}),M.name&&e.jsx("p",{className:"text-sm text-red-500",children:M.name})]})}),e.jsxs(v,{children:[e.jsx(s,{type:"button",variant:"secondary",onClick:()=>d(!1),disabled:t,className:"border-neutral-200 bg-white text-neutral-700 hover:bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),e.jsx(s,{type:"submit",disabled:t||!D.name,className:"flex items-center gap-2 bg-gray-900 text-sm hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600",children:t?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Create tag"]})})]})]})]})}),e.jsx(y,{open:w,onOpenChange:l,children:e.jsxs(f,{className:"border-neutral-200 bg-white dark:border-neutral-700 dark:bg-neutral-800",children:[e.jsx(T,{children:e.jsx(N,{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:"Edit Tag"})}),e.jsxs("form",{onSubmit:a=>{a.preventDefault(),V().then()},children:[e.jsxs("div",{className:"flex flex-row gap-4 py-4",children:[e.jsxs("div",{className:"grid w-10/12 gap-2",children:[e.jsx(S,{htmlFor:"edit-name",children:"Tag Name"}),e.jsx(F,{id:"edit-name",value:b.name,onChange:a=>C("name",a.target.value),placeholder:"Enter tag name",disabled:t}),O.name&&e.jsx("p",{className:"text-sm text-red-500",children:O.name})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx(S,{htmlFor:"edit-color",children:"Tag Color"}),e.jsx(F,{id:"edit-color",type:"color",value:b.color,onChange:a=>C("color",a.target.value),disabled:t})]})]}),e.jsxs(v,{children:[e.jsx(s,{type:"button",variant:"secondary",onClick:()=>l(!1),disabled:t,className:"border-neutral-200 bg-white text-neutral-700 hover:bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),e.jsx(s,{type:"submit",className:"flex items-center gap-2 bg-gray-900 text-sm hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600",disabled:t||!b.name,children:t?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),"Updating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Update Tag"]})})]})]})]})}),e.jsx(y,{open:k,onOpenChange:m,children:e.jsxs(f,{className:"border-neutral-200 bg-white dark:border-neutral-700 dark:bg-neutral-800",children:[e.jsx(T,{children:e.jsx(N,{className:"text-lg font-medium text-neutral-900 dark:text-neutral-100",children:"Delete Tag"})}),e.jsxs("div",{className:"py-4",children:[e.jsxs("p",{className:"text-neutral-700 dark:text-neutral-300",children:['Are you sure you want to delete the tag "',x==null?void 0:x.name,'"?']}),e.jsx("p",{className:"mt-2 text-sm text-red-500",children:"This action cannot be undone. The tag will be removed from all time logs."})]}),e.jsxs(v,{children:[e.jsx(s,{type:"button",variant:"secondary",onClick:()=>m(!1),disabled:t,className:"border-neutral-200 bg-white text-neutral-700 hover:bg-neutral-100 dark:border-neutral-700 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700",children:"Cancel"}),e.jsx(s,{type:"button",variant:"destructive",onClick:G,disabled:t,className:"bg-red-600 text-white transition-colors duration-200 hover:bg-red-700 dark:bg-red-700/80 dark:hover:bg-red-700",children:t?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"Delete Tag"]})})]})]})})]})}export{xa as default};
