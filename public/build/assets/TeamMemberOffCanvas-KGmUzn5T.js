import{u as D,r as j,j as e,b as v}from"./app-Bk4PR63W.js";import{I as d}from"./input-error-aCAuibxh.js";import{S as B}from"./submit-button-D4bxzCEW.js";import{B as L}from"./button-BGAiRGZg.js";import{C as k}from"./checkbox-DLdSU6vz.js";import{L as o,I as u}from"./label-HoiQ3GNm.js";import{S as M,a as T,b as U,c as P,d as q}from"./select-BTxuEGZI.js";import{S as A,a as H,b as O,c as R,d as V}from"./sheet-D7dB8w4W.js";import{t as h}from"./index-D-Gk-yT4.js";import{U as N}from"./user-C4MlcwvE.js";import{U as w}from"./user-plus-DsESlMzd.js";import{M as G}from"./mail-HXspYXJq.js";import{L as J}from"./lock-CVs0MTYN.js";import{D as z}from"./dollar-sign-Bm2w-Hi4.js";import{L as K}from"./loader-circle-BCYeDwOj.js";import{S as Q}from"./save-9NB0FlW1.js";/* empty css            */import"./utils-DKW5XViW.js";import"./index-DDqfYr5D.js";import"./index-Dely6azp.js";import"./index-CPvS59-d.js";import"./createLucideIcon-CdLL0xzd.js";import"./index-BJl2vPHw.js";import"./index-D5x193o-.js";import"./index-BsY2LpXN.js";import"./index-D-w6wlEG.js";import"./index-C79L9l-a.js";import"./floating-ui.react-dom-8ikc8Qbx.js";import"./index-DiDFMmY4.js";import"./chevron-up-F-D43jrY.js";import"./index-DDNv-7cB.js";import"./x-Dz3a5Yj_.js";function Ce({open:p,mode:g,onClose:m,currencies:c,genericEmails:_,user:a}){var y;const r=g==="edit",{data:s,setData:l,post:S,put:C,processing:n,errors:i,reset:b}=D({name:r&&a?a.name:"",email:r&&a?a.email:"",password:"",hourly_rate:r&&a?a.hourly_rate:0,currency:r&&a?a.currency:((y=c[0])==null?void 0:y.code)??"USD",non_monetary:r&&a?a.non_monetary:!1,is_employee:r&&a?a.is_employee:!1});j.useEffect(()=>{var t;p?l({name:r&&a?a.name:"",email:r&&a?a.email:"",password:"",hourly_rate:r&&a?a.hourly_rate:0,currency:r&&a?a.currency:((t=c[0])==null?void 0:t.code)??"USD",non_monetary:r&&a?a.non_monetary:!1,is_employee:r&&a?a.is_employee:!1}):b()},[p,g,a]);const F=t=>{t.preventDefault(),r&&a?C(route("team.update",a.id),{onSuccess:()=>{h.success("Team member updated successfully"),v.reload({only:["teamMembers"]}),m()},onError:()=>h.error("Failed to update team member"),preserveScroll:!0}):S(route("team.store"),{onSuccess:()=>{h.success("Team member created successfully"),v.reload({only:["teamMembers"]}),m(),b()},onError:()=>h.error("Failed to create team member"),preserveScroll:!0})},I=(s.email.split("@")[1]||"").toLowerCase(),E=_.includes(I),x=!r&&E;return j.useEffect(()=>{x&&s.is_employee&&l("is_employee",!1)},[x]),e.jsx(A,{open:p,onOpenChange:t=>!t&&m(),children:e.jsxs(H,{side:"right",className:"overflow-y-auto bg-white pr-6 pb-8 pl-6 sm:max-w-md md:max-w-lg dark:bg-neutral-900",children:[e.jsxs(O,{className:"",children:[e.jsx(R,{className:"flex items-center gap-2 text-xl text-neutral-900 dark:text-white",children:r?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-5 w-5 text-neutral-700 dark:text-neutral-300"})," Edit Team Member"]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"h-5 w-5 text-neutral-700 dark:text-neutral-300"})," Add Team Member"]})}),e.jsx(V,{className:"text-sm text-neutral-500 dark:text-neutral-400",children:r?"Update the team member details":"Create a new team member"})]}),e.jsx("div",{children:e.jsx("form",{className:"flex flex-col gap-8",onSubmit:F,children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-5",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Basic Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"name",className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Full Name"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center",children:e.jsx(N,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})}),e.jsx(u,{id:"name",type:"text",required:!0,autoFocus:!0,tabIndex:1,autoComplete:"name",value:s.name,onChange:t=>l("name",t.target.value),disabled:n,placeholder:"John Doe",className:"border-neutral-200 bg-white pl-10 ring-offset-white focus-visible:ring-neutral-400 dark:border-neutral-800 dark:bg-neutral-800/50 dark:ring-offset-neutral-900 dark:focus-visible:ring-neutral-600"})]}),e.jsx(d,{message:i.name,className:"mt-1"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"email",className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Email Address"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center",children:e.jsx(G,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})}),e.jsx(u,{id:"email",type:"email",required:!0,tabIndex:2,autoComplete:"email",value:s.email,onChange:t=>l("email",t.target.value),disabled:n,placeholder:"john@example.com",className:"border-neutral-200 bg-white pl-10 ring-offset-white focus-visible:ring-neutral-400 dark:border-neutral-800 dark:bg-neutral-800/50 dark:ring-offset-neutral-900 dark:focus-visible:ring-neutral-600"})]}),e.jsx(d,{message:i.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"password",className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:r?e.jsxs(e.Fragment,{children:["Password ",e.jsx("span",{className:"text-xs text-gray-500",children:"(leave empty to keep current password)"})]}):"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center",children:e.jsx(J,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})}),e.jsx(u,{id:"password",type:"password",tabIndex:3,autoComplete:"new-password",value:s.password,onChange:t=>l("password",t.target.value),disabled:n,required:!r,placeholder:"••••••••",className:"border-neutral-200 bg-white pl-10 ring-offset-white focus-visible:ring-neutral-400 dark:border-neutral-800 dark:bg-neutral-800/50 dark:ring-offset-neutral-900 dark:focus-visible:ring-neutral-600"})]}),e.jsx(d,{message:i.password})]})]}),e.jsxs("div",{className:"space-y-5 pt-2",children:[e.jsx("h3",{className:"text-sm font-medium text-neutral-700 dark:text-neutral-300",children:"Payment Information"}),e.jsxs("div",{className:"flex items-center gap-3 rounded-md border border-neutral-100 bg-neutral-50 p-3 dark:border-neutral-800 dark:bg-neutral-800/30",children:[e.jsx("div",{className:"flex h-5 items-center",children:e.jsx(k,{id:"is_employee",checked:!!s.is_employee,onCheckedChange:t=>{const f=!!t;l("is_employee",f),f&&l("non_monetary",!0)},disabled:x||n,className:"border-neutral-300 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-800"})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(o,{htmlFor:"is_employee",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Is Employee"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["If checked, Non-monetary will be auto-enabled",x?" — cannot mark as employee when using a generic email domain":""]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 rounded-md border border-neutral-100 bg-neutral-50 p-3 dark:border-neutral-800 dark:bg-neutral-800/30",children:[e.jsx("div",{className:"flex h-5 items-center",children:e.jsx(k,{id:"non_monetary",checked:!!s.non_monetary,onCheckedChange:t=>l("non_monetary",!!t),disabled:!!s.is_employee,className:"border-neutral-300 text-neutral-700 dark:border-neutral-700 dark:bg-neutral-800"})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(o,{htmlFor:"non_monetary",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Non-monetary member"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"This team member doesn't have an hourly rate"})]})]}),!s.non_monetary&&e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"hourly_rate",className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Hourly Rate"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"pointer-events-none absolute inset-y-0 left-3 flex items-center",children:e.jsx(z,{className:"h-4 w-4 text-gray-400 dark:text-gray-500"})}),e.jsx(u,{id:"hourly_rate",type:"number",min:"0",step:"0.01",tabIndex:4,value:s.hourly_rate,onChange:t=>l("hourly_rate",t.target.value),disabled:n,placeholder:"0.00",className:"border-neutral-200 bg-white pl-10 ring-offset-white focus-visible:ring-neutral-400 dark:border-neutral-800 dark:bg-neutral-800/50 dark:ring-offset-neutral-900 dark:focus-visible:ring-neutral-600"})]}),e.jsx(d,{message:i.hourly_rate})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(o,{htmlFor:"currency",className:"text-xs font-medium text-gray-600 dark:text-gray-400",children:"Currency"}),e.jsxs(M,{value:s.currency,onValueChange:t=>l("currency",t),disabled:n||c.length===0,children:[e.jsx(T,{id:"currency",className:"border-neutral-200 bg-white ring-offset-white focus:ring-neutral-400 dark:border-neutral-800 dark:bg-neutral-800/50 dark:ring-offset-neutral-900 dark:focus:ring-neutral-600",children:e.jsx(U,{placeholder:"Select a currency"})}),e.jsx(P,{className:"border-neutral-200 bg-white dark:border-neutral-800 dark:bg-neutral-800/50",children:c.map(t=>e.jsx(q,{value:t.code,children:t.code},t.id))})]}),e.jsx(d,{message:i.currency})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3 border-t border-neutral-200 pt-6 dark:border-neutral-800",children:[e.jsx(L,{type:"button",variant:"outline",onClick:m,disabled:n,className:"border-neutral-200 hover:bg-neutral-100 hover:text-neutral-900 dark:border-neutral-800 dark:hover:bg-neutral-800 dark:hover:text-neutral-100",children:"Cancel"}),e.jsx(B,{loading:n,idleLabel:r?"Update Member":"Create Team Member",loadingLabel:r?"Updating...":"Creating...",idleIcon:r?e.jsx(Q,{className:"h-4 w-4"}):e.jsx(w,{className:"h-4 w-4"}),loadingIcon:e.jsx(K,{className:"h-4 w-4 animate-spin"}),className:"bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600"})]})]})})})]})})}export{Ce as default};
