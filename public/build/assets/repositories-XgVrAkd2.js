import{r as o,j as e,H as b,a as n}from"./app-CE94QcfB.js";import{B as f}from"./badge-Do30HICq.js";import{B as h}from"./button-CSc-Cw7e.js";import{C as p,d as y,a as A,b as z,c as E}from"./card-BF0DTRGt.js";import{I as Y}from"./label-DISzI683.js";import{M as j,S as Z}from"./master-layout-tsVhh441.js";import{S as P}from"./separator-Ypd1NZ1n.js";import{c as ee}from"./utils-DKW5XViW.js";import{t as u}from"./index-C5Svuudg.js";import{G as l}from"./github-CZtBj8bQ.js";import{L as N}from"./loader-circle-D1ym3s0F.js";import{S as re}from"./search-4eIqUzEe.js";import{D as te}from"./download-BHzq6k4i.js";import{E as se}from"./external-link-CXzUVR5e.js";/* empty css            */import"./index-Becnjq-x.js";import"./index-DkUby8a3.js";import"./index-BC-ip4sp.js";import"./cookie-consent-CR7wTwap.js";import"./index-CSGd7LPk.js";import"./index-gOG35dkf.js";import"./index-OH_msQzS.js";import"./index-DmtIMq0f.js";import"./floating-ui.react-dom-ODH34Sgt.js";import"./index-DwOlKDQm.js";import"./select-D_MCfbK8.js";import"./index-DssjTqXu.js";import"./createLucideIcon-D9NWueAg.js";import"./chevron-up-BMiBX3If.js";import"./TaskController-DRILXs0Z.js";import"./jira-icon-pYe84P2s.js";import"./x-BKkU3iVo.js";import"./index-fJEy3cUu.js";import"./trash-2-BRVXkUm4.js";import"./sheet-0Ok6l0ab.js";import"./plus-CeOzYAGh.js";import"./clock-CV0oisNo.js";import"./appearance-dropdown-CplWtr1N.js";import"./dropdown-menu-Dy5Hq4rj.js";import"./index-C7hwMZoy.js";import"./circle-alert-5FNlBjr8.js";import"./checkbox-TCMWq4Ph.js";import"./chevron-right-BzTA_0kR.js";import"./settings-Bjly2KGq.js";import"./bell-CbXQzXBs.js";import"./users-Dah8edja.js";import"./app-logo-icon-DHSG1eGj.js";import"./log-out-BQwzfcg9.js";import"./building-BzSs3yfb.js";import"./projector-C9mKpjiA.js";import"./clipboard-list-BccoXVyt.js";import"./timer-BE1bBtuS.js";import"./file-text-D51RJe6F.js";import"./square-check-big-B68kPrbC.js";const v=[{title:"GitHub",href:"/github/repositories"},{title:"Repositories",href:"/github/repositories"}];function ar(){const[_,B]=o.useState([]),[T,F]=o.useState({}),[O,$]=o.useState([]),[m,k]=o.useState(""),[D,w]=o.useState(!1),[C,g]=o.useState(null),[M,R]=o.useState("personal"),[U,H]=o.useState(!1),[V,G]=o.useState(!0),[S,L]=o.useState(null),q=async t=>{var s,r;try{L(t.id);const a=await n.post(route("github.repositories.import"),{repo_id:t.id,name:t.name,description:t.description||`Imported from GitHub: ${t.full_name}`,full_name:t.full_name,html_url:t.html_url});a.data.success===!1?a.data.error?u.error(a.data.error):u.error("Failed to import repository. Please try again."):(u.success("Repository successfully imported as a project!"),t.is_imported=!0)}catch(a){n.isAxiosError(a)&&((r=(s=a.response)==null?void 0:s.data)!=null&&r.error)?u.error(a.response.data.error):u.error("Failed to import repository. Please try again.")}finally{L(null)}},J=()=>{const t=[{title:"Personal",href:"/github/repositories?tab=personal",icon:l}];return O.forEach(s=>{t.push({title:s,href:`/github/repositories?tab=${s}`,icon:l})}),t};o.useEffect(()=>{(async()=>{var s,r,a;G(!0);try{await n.get(route("github.repositories.personal")),H(!0),K().then();const d=new URLSearchParams(window.location.search).get("tab");d&&R(d)}catch(i){n.isAxiosError(i)&&((s=i.response)==null?void 0:s.status)===401?H(!1):n.isAxiosError(i)&&((a=(r=i.response)==null?void 0:r.data)!=null&&a.error)?g(i.response.data.error):g("An error occurred while checking GitHub authentication.")}finally{G(!1)}})().then()},[]);const K=async()=>{var t,s;w(!0),g(null);try{const r=await n.get(route("github.repositories.personal"));B(r.data);const i=(await n.get(route("github.repositories.organization"))).data,d={},I=[];i.forEach(x=>{x.organization&&(d[x.organization]||(d[x.organization]=[],I.push(x.organization)),d[x.organization].push(x))}),F(d),$(I)}catch(r){n.isAxiosError(r)&&((s=(t=r.response)==null?void 0:t.data)!=null&&s.error)?g(r.response.data.error):g("Failed to fetch repositories. Please try again."),console.error("Error fetching repositories:",r)}finally{w(!1)}},Q=t=>{const s=t.filter(r=>r.name.toLowerCase().includes(m.toLowerCase())||r.description&&r.description.toLowerCase().includes(m.toLowerCase()));return D?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"mb-6 rounded-full bg-primary/10 p-4",children:e.jsx(N,{className:"h-10 w-10 animate-spin text-primary"})}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-800 dark:text-gray-100",children:"Loading Repositories"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Fetching repositories from GitHub..."})]}):s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"mb-6 rounded-full bg-gray-100 p-4 dark:bg-gray-700",children:e.jsx(l,{className:"h-12 w-12 text-gray-600 dark:text-gray-300"})}),e.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-800 dark:text-gray-100",children:m?"No repositories match your search":"No repositories found"}),e.jsx("p",{className:"max-w-md text-center text-sm text-gray-500 dark:text-gray-400",children:m?"Try a different search term or clear your search to see all repositories.":"No repositories were found for this account. If you expect to see repositories, ensure you have granted the necessary permissions."}),m&&e.jsx(h,{onClick:()=>k(""),className:"mt-4 bg-gray-900 text-sm hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600",children:"Clear Search"})]}):e.jsx(Z,{className:"h-[450px] pr-2",children:e.jsx("div",{className:"space-y-4",children:s.map(r=>e.jsx(p,{className:"overflow-hidden border border-gray-100 bg-white shadow-sm transition-all hover:shadow-md dark:border-gray-700 dark:bg-gray-800",children:e.jsxs(y,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 text-lg font-medium text-gray-800 dark:text-gray-100",children:[e.jsx(l,{className:"h-4 w-4 text-primary"}),r.name,r.private&&e.jsx(f,{variant:"outline",className:"ml-1 border-amber-200 bg-amber-100 text-xs font-normal text-amber-700 dark:border-amber-800 dark:bg-amber-900 dark:text-amber-300",children:"Private"})]}),r.description&&e.jsx("p",{className:"mt-2 line-clamp-2 text-sm text-gray-500 dark:text-gray-400",children:r.description})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[r.is_imported?e.jsx(f,{variant:"outline",className:"mr-2 border-green-300/50 bg-transparent p-2 text-green-700 dark:text-green-300",children:"Imported"}):e.jsx(h,{size:"sm",className:"bg-gray-900 text-sm hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600",onClick:()=>q(r),disabled:S===r.id,children:S===r.id?e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"mr-1 h-4 w-4 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"mr-1 h-4 w-4"}),"Import"]})}),e.jsx(h,{variant:"ghost",size:"icon",asChild:!0,className:"text-muted-foreground hover:bg-primary/10 hover:text-primary",children:e.jsx("a",{href:r.html_url,target:"_blank",rel:"noopener noreferrer",title:"Open in GitHub",children:e.jsx(se,{className:"h-4 w-4"})})})]})]}),e.jsx(P,{className:"my-3"}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:r.full_name}),r.organization&&e.jsx(f,{variant:"outline",className:"text-xs font-normal",children:r.organization})]})]})},r.id))})})};if(V)return e.jsxs(j,{breadcrumbs:v,children:[e.jsx(b,{title:"GitHub Repositories"}),e.jsxs("div",{className:"mx-auto flex flex-col gap-4 p-4",children:[e.jsx("section",{className:"mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2 dark:bg-gray-700",children:e.jsx(l,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-medium tracking-tight text-gray-800 dark:text-gray-100",children:"GitHub Repositories"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Loading GitHub repositories"})]})]})}),e.jsx(p,{className:"overflow-hidden bg-white shadow-sm transition-all dark:bg-gray-800",children:e.jsx(y,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"mb-6 rounded-full bg-primary/10 p-4",children:e.jsx(N,{className:"h-10 w-10 animate-spin text-primary"})}),e.jsx("h3",{className:"mb-2 text-xl font-medium text-gray-800 dark:text-gray-100",children:"Checking GitHub Connection"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Please wait while we verify your GitHub authentication status..."})]})})})]})]});if(!U)return e.jsxs(j,{breadcrumbs:v,children:[e.jsx(b,{title:"GitHub Repositories"}),e.jsxs("div",{className:"mx-auto flex flex-col gap-4 p-4 md:w-10/12",children:[e.jsx("section",{className:"mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2 dark:bg-gray-700",children:e.jsx(l,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-medium tracking-tight text-gray-800 dark:text-gray-100",children:"GitHub Repositories"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Connect and manage GitHub repositories"})]})]})}),e.jsxs(p,{className:"overflow-hidden bg-white shadow-sm transition-all dark:bg-gray-800",children:[e.jsx(A,{className:"border-b border-gray-100 p-4 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2 dark:bg-gray-700",children:e.jsx(l,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx(z,{className:"text-lg font-medium text-gray-800 dark:text-gray-100",children:"GitHub Integration"}),e.jsx(E,{className:"text-sm text-gray-500 dark:text-gray-400",children:"Connect your GitHub account to view your repositories"})]})]})}),e.jsx(y,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-6",children:[e.jsx("div",{className:"mb-6 rounded-full bg-primary/10 p-4",children:e.jsx(l,{className:"h-16 w-16 text-primary"})}),e.jsx("h3",{className:"mb-2 text-xl font-medium text-gray-800 dark:text-gray-100",children:"Connect with GitHub"}),e.jsx("p",{className:"mb-6 max-w-md text-center text-gray-500 dark:text-gray-400",children:"Link your GitHub account to access and manage your repositories directly from this application."}),e.jsx(h,{asChild:!0,className:"bg-gray-900 text-sm hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600",children:e.jsxs("a",{href:route("auth.github"),children:[e.jsx(l,{className:"mr-2 h-4 w-4"}),"Connect GitHub Account"]})})]})})]})]})]});const c=M,W=J(),X=()=>c==="personal"?_:T[c]||[];return e.jsxs(j,{breadcrumbs:v,children:[e.jsx(b,{title:"GitHub Repositories"}),e.jsxs("div",{className:"mx-auto flex flex-col gap-4 p-4",children:[e.jsx("section",{className:"mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2 dark:bg-gray-700",children:e.jsx(l,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-medium tracking-tight text-gray-800 dark:text-gray-100",children:"GitHub Repositories"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"View and manage your GitHub repositories"})]})]})}),e.jsxs("div",{className:"mt-6 flex flex-col space-y-8 lg:flex-row lg:space-y-0 lg:space-x-12",children:[e.jsx("aside",{className:"w-full max-w-xl lg:w-64",children:e.jsxs(p,{className:"overflow-hidden bg-white shadow-sm transition-all dark:bg-gray-800",children:[e.jsx("div",{className:"border-b border-gray-100 p-4 dark:border-gray-700",children:e.jsx("h3",{className:"text-sm font-medium text-gray-800 dark:text-gray-100",children:"Repository Sources"})}),e.jsx("nav",{className:"flex flex-col p-2",children:W.map((t,s)=>{const r=t.icon,a=t.title.toLowerCase()===c.toLowerCase();return e.jsx(h,{size:"sm",variant:"ghost",className:ee("mb-1 w-full justify-start px-3 py-2 text-sm text-gray-800",{"bg-gray-900 text-white hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600":a,"hover:bg-gray-100 dark:hover:bg-gray-800":!a}),onClick:()=>{R(t.title.toLowerCase());const i=new URL(window.location.href);i.searchParams.set("tab",t.title.toLowerCase()),window.history.pushState({},"",i)},children:e.jsxs("div",{className:"flex items-center gap-3",children:[r&&e.jsx(r,{className:"h-4 w-4"}),e.jsx("span",{children:t.title})]})},`${t.href}-${s}`)})})]})}),e.jsx(P,{className:"my-6 md:hidden"}),e.jsx("div",{className:"flex-1 md:max-w-3xl",children:e.jsxs(p,{className:"overflow-hidden bg-white shadow-sm transition-all dark:bg-gray-800",children:[e.jsx(A,{className:"border-b border-gray-100 p-4 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2 dark:bg-gray-700",children:e.jsx(l,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx(z,{className:"text-lg font-medium text-gray-800 dark:text-gray-100",children:c==="personal"?"Personal Repositories":`${c} Repositories`}),e.jsx(E,{className:"text-sm text-gray-500 dark:text-gray-400",children:c==="personal"?"Browse your personal GitHub repositories":`Browse repositories from the ${c} organization`})]})]})}),e.jsxs(y,{className:"p-4",children:[C&&e.jsx("div",{className:"mb-4 rounded-md bg-destructive/15 p-3 text-destructive",children:C}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(re,{className:"absolute top-2.5 left-3 h-4 w-4 text-gray-500 dark:text-gray-400"}),e.jsx(Y,{type:"search",placeholder:"Search repositories...",className:"h-10 border-gray-200 bg-white pl-9 text-gray-800 placeholder:text-gray-500 focus-visible:ring-primary/70 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:placeholder:text-gray-400",value:m,onChange:t=>k(t.target.value)})]})}),Q(X())]})]})})]})]})]})}export{ar as default};
