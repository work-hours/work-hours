import{j as e}from"./app-CE94QcfB.js";import{g as j,t as k,s as v,f as x}from"./format-DaJbwain.js";import{C as w}from"./chevron-right-BzTA_0kR.js";import{C as N}from"./clock-CV0oisNo.js";import{C as M}from"./calendar-C8zGel57.js";import{p as g,i as y}from"./parseISO-DbJI0UL_.js";import{e as D}from"./eachDayOfInterval-D6ULaKSU.js";function O(h,f){var l,c;const i=j(),d=i.weekStartsOn??((c=(l=i.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??0,a=k(h),n=a.getDay(),o=(n<d?-7:0)+6-(n-d);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function C({timeLogs:h,date:f,onTimeLogClick:i}){const d=g(f),a=v(d),n=O(d),o=D({start:a,end:n}),l=Array.from({length:24},(t,s)=>s),c=(t,s)=>h.filter(m=>{const r=g(m.start);return y(r,t)&&r.getHours()===s}),b=t=>({top:`${g(t.start).getMinutes()}px`,height:"40px"});return e.jsx("div",{className:"overflow-x-auto rounded-lg bg-white shadow dark:bg-gray-800",children:e.jsxs("div",{className:"min-w-[800px]",children:[e.jsxs("div",{className:"grid grid-cols-8 border-b dark:border-gray-700",children:[e.jsx("div",{className:"sticky left-0 z-10 border-r bg-white p-3 text-center font-medium dark:border-gray-700 dark:bg-gray-800",children:e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Time"})}),o.map((t,s)=>e.jsxs("div",{className:"border-r p-3 text-center last:border-r-0 dark:border-gray-700",children:[e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:x(t,"EEE")}),e.jsx("div",{className:`my-1 text-lg font-medium ${y(t,new Date)?"mx-auto flex h-8 w-8 items-center justify-center rounded-full bg-blue-500 text-white":"text-gray-700 dark:text-gray-200"} `,children:x(t,"d")}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:x(t,"MMM")})]},s))]}),e.jsxs("div",{className:"relative",children:[l.map(t=>e.jsxs("div",{className:"grid grid-cols-8 border-b dark:border-gray-700",children:[e.jsx("div",{className:"sticky left-0 z-10 flex h-[60px] items-center justify-center border-r bg-white p-2 text-center dark:border-gray-700 dark:bg-gray-800",children:e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:t===0?"12 AM":t<12?`${t} AM`:t===12?"12 PM":`${t-12} PM`})}),o.map((s,m)=>e.jsxs("div",{className:"relative h-[60px] border-r last:border-r-0 dark:border-gray-700",children:[e.jsx("div",{className:"absolute top-1/2 right-0 left-0 border-t border-dotted border-gray-200 dark:border-gray-700"}),c(s,t).map((r,p)=>{const u=b(r);return e.jsxs("div",{className:"border-opacity-20 group absolute right-1 left-1 cursor-pointer overflow-hidden rounded-md border p-1.5 shadow-sm transition-shadow hover:z-20 hover:shadow-md",style:{...u,zIndex:p+1,backgroundColor:r.project.color+"15",borderColor:r.project.color,borderLeftWidth:"4px",left:`${Math.min(5*p,40)}%`,width:`${Math.max(60-5*p,40)}%`},onClick:()=>i(r.id),children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"truncate font-medium text-gray-800 dark:text-gray-200",children:r.project.name}),e.jsx(w,{className:"h-3 w-3 text-gray-400 opacity-0 transition-opacity group-hover:opacity-100"})]}),e.jsxs("div",{className:"flex items-center text-xs text-gray-600 dark:text-gray-400",children:[e.jsx(N,{className:"mr-1 h-3 w-3 shrink-0"}),x(g(r.start),"HH:mm"),e.jsx("span",{className:"mx-1",children:"Â·"}),r.duration,"h"]}),r.task&&e.jsxs("div",{className:"mt-0.5 flex items-center truncate text-xs text-gray-600 dark:text-gray-400",children:[e.jsx(M,{className:"mr-1 h-3 w-3 shrink-0"}),r.task.title]})]},`${r.id}-${t}`)})]},m))]},t)),o.some(t=>y(t,new Date))&&e.jsxs("div",{className:"pointer-events-none absolute right-0 left-0 z-20",style:{top:`${new Date().getHours()*60+new Date().getMinutes()}px`},children:[e.jsx("div",{className:"ml-[12.5%] h-0.5 w-[87.5%] bg-red-500"}),e.jsx("div",{className:"absolute -top-1.5 -left-1 ml-[12.5%] h-3 w-3 rounded-full bg-red-500"})]})]})]})})}const H=Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"}));export{C as W,H as a,O as e};
