import{r as a,j as e,H as N,a as v}from"./app-Bk4PR63W.js";import{B as C}from"./button-BGAiRGZg.js";import{C as w,a as J,b as S,c as M,d as I}from"./card-Dtas3RKB.js";import{L as m,I as c}from"./label-HoiQ3GNm.js";import{M as E}from"./master-layout-DChFziky.js";import{S as L}from"./shield-check-DTEGpYat.js";import{c as A}from"./createLucideIcon-CdLL0xzd.js";import{L as P}from"./loader-circle-BCYeDwOj.js";/* empty css            */import"./index-DDqfYr5D.js";import"./utils-DKW5XViW.js";import"./index-BsY2LpXN.js";import"./index-D-w6wlEG.js";import"./cookie-consent-4J8V3XdM.js";import"./index-D5x193o-.js";import"./index-Dely6azp.js";import"./index-DiDFMmY4.js";import"./index-C79L9l-a.js";import"./floating-ui.react-dom-8ikc8Qbx.js";import"./index-BJl2vPHw.js";import"./select-BTxuEGZI.js";import"./index-CPvS59-d.js";import"./chevron-up-F-D43jrY.js";import"./TaskController-DRILXs0Z.js";import"./jira-icon-wsasIrn-.js";import"./x-Dz3a5Yj_.js";import"./index-DDNv-7cB.js";import"./trash-2-C7f2dPei.js";import"./sheet-D7dB8w4W.js";import"./plus-p8BKPWNs.js";import"./clock-oQTHBRij.js";import"./appearance-dropdown-mVcvt_IG.js";import"./dropdown-menu-DdvMI060.js";import"./index-B_GyHV6l.js";import"./circle-alert-BqzIHG1p.js";import"./checkbox-DLdSU6vz.js";import"./index-D-Gk-yT4.js";import"./badge-BNr9aysp.js";import"./chevron-right-BUIh066M.js";import"./settings-DsZ09whw.js";import"./bell-CQjVsOHt.js";import"./users-DZUcVCZB.js";import"./app-logo-icon-CFfAIG7o.js";import"./github-DB_zkOOK.js";import"./log-out-CHwRCYXF.js";import"./building-b-lKGHwq.js";import"./projector-DmVTEmlk.js";import"./clipboard-list-CMM2SLJn.js";import"./timer-CKwyTId6.js";import"./file-text-BEAzekmp.js";import"./square-check-big-BqCCrkHI.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],u=A("ShieldAlert",D),T=[{title:"Integration",href:"/integration"},{title:"Jira Connection",href:"/jira/connect"}];function Pe(){const[s,f]=a.useState(""),[i,j]=a.useState(""),[o,k]=a.useState(""),[g,p]=a.useState(!1),[x,l]=a.useState(null),[h,n]=a.useState(null),d=(r,t=!1)=>{t?(l(r),n(null)):(n(r),l(null)),setTimeout(()=>{t?l(null):n(null)},5e3)},b=async()=>{var r,t;if(!s||!i||!o){d("Please provide your Jira domain, email, and API token.",!0);return}p(!0);try{await v.post("/jira/credentials",{domain:s,email:i,token:o}),d("Your Jira credentials have been validated and saved."),window.location.href="/jira/projects"}catch(y){console.error("Error connecting to Jira:",y),d(((t=(r=y.response)==null?void 0:r.data)==null?void 0:t.message)||"Could not connect to Jira. Please check your credentials.",!0)}finally{p(!1)}};return e.jsxs(E,{breadcrumbs:T,children:[e.jsx(N,{title:"Connect to Jira"}),e.jsxs("div",{className:"mx-auto flex max-w-xl flex-col gap-6 p-6",children:[e.jsx("section",{className:"mb-2",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2 dark:bg-gray-700",children:e.jsx(L,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-medium tracking-tight text-gray-800 dark:text-gray-100",children:"Connect to Jira"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"Enter your Jira credentials to access your projects"})]})]})}),x&&e.jsx("div",{className:"rounded-md bg-red-50 p-4 text-sm text-red-700 dark:bg-red-900/50 dark:text-red-200",children:x}),h&&e.jsx("div",{className:"rounded-md bg-green-50 p-4 text-sm text-green-700 dark:bg-green-900/50 dark:text-green-200",children:h}),e.jsxs(w,{className:"overflow-hidden bg-white shadow-sm transition-all dark:bg-gray-800",children:[e.jsx(J,{className:"border-b border-gray-100 p-4 dark:border-gray-700",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"rounded-full bg-gray-100 p-2 dark:bg-gray-700",children:e.jsx(u,{className:"h-5 w-5 text-gray-600 dark:text-gray-300"})}),e.jsxs("div",{children:[e.jsx(S,{className:"text-lg font-medium text-gray-800 dark:text-gray-100",children:"Jira Credentials"}),e.jsx(M,{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enter your Jira credentials to connect to your account"})]})]})}),e.jsx(I,{className:"p-4",children:e.jsxs("form",{className:"space-y-4",onSubmit:r=>{r.preventDefault(),b()},children:[e.jsxs("div",{className:"grid w-full items-center gap-2",children:[e.jsx(m,{htmlFor:"domain",className:"text-sm font-medium",children:"Jira Domain"}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(c,{id:"domain",placeholder:"mycompany",value:s,onChange:r=>f(r.target.value),className:"border-gray-200 bg-white text-gray-800 placeholder:text-gray-500 focus-visible:ring-primary/70 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:placeholder:text-gray-400"}),e.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:".atlassian.net"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Enter only the subdomain part"})]}),e.jsxs("div",{className:"grid w-full items-center gap-2",children:[e.jsx(m,{htmlFor:"email",className:"text-sm font-medium",children:"Email"}),e.jsx(c,{id:"email",type:"email",placeholder:"your.email@example.com",value:i,onChange:r=>j(r.target.value),className:"border-gray-200 bg-white text-gray-800 placeholder:text-gray-500 focus-visible:ring-primary/70 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:placeholder:text-gray-400"})]}),e.jsxs("div",{className:"grid w-full items-center gap-2",children:[e.jsx(m,{htmlFor:"token",className:"text-sm font-medium",children:"API Token"}),e.jsx(c,{id:"token",type:"password",placeholder:"Your Jira API token",value:o,onChange:r=>k(r.target.value),className:"border-gray-200 bg-white text-gray-800 placeholder:text-gray-500 focus-visible:ring-primary/70 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-100 dark:placeholder:text-gray-400"}),e.jsxs("div",{className:"flex items-center gap-1 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsxs("span",{children:["Generate an API token in your"," ",e.jsx("a",{href:"https://id.atlassian.com/manage-profile/security/api-tokens",target:"_blank",rel:"noopener noreferrer",className:"font-medium text-primary underline hover:text-primary/80",children:"Atlassian account settings"})]})]})]}),e.jsx("div",{className:"mt-12 flex items-center justify-end gap-2",children:e.jsxs(C,{type:"submit",disabled:g,className:"bg-gray-900 text-sm hover:bg-gray-800 dark:bg-gray-700 dark:hover:bg-gray-600",children:[g&&e.jsx(P,{className:"mr-2 h-4 w-4 animate-spin"}),"Connect to Jira"]})})]})})]})]})]})}export{Pe as default};
