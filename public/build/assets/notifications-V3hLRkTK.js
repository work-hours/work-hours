import{r as m,j as a,H as B}from"./app-CE94QcfB.js";import{B as C}from"./badge-Do30HICq.js";import{B as n}from"./button-CSc-Cw7e.js";import{C as _}from"./card-BF0DTRGt.js";import{L as R}from"./loader-BOHcDbhP.js";import{S as P}from"./separator-Ypd1NZ1n.js";import{M as S,k as z,m as F,l as I}from"./master-layout-tsVhh441.js";import{t as g}from"./index-C5Svuudg.js";import{B as D}from"./bell-CbXQzXBs.js";import{C as h}from"./circle-check-big-D6zoYCqp.js";import{c as E}from"./createLucideIcon-D9NWueAg.js";import{I as H}from"./info-Im89IFst.js";import{C as O}from"./chevron-left--yMEEuJA.js";import{C as Y}from"./chevron-right-BzTA_0kR.js";import{C as q}from"./clock-CV0oisNo.js";import{M as T}from"./mail-3NLULyqe.js";import{C as Z}from"./circle-alert-5FNlBjr8.js";/* empty css            */import"./index-Becnjq-x.js";import"./utils-DKW5XViW.js";import"./index-DkUby8a3.js";import"./index-BC-ip4sp.js";import"./cookie-consent-CR7wTwap.js";import"./index-CSGd7LPk.js";import"./index-gOG35dkf.js";import"./index-OH_msQzS.js";import"./index-DmtIMq0f.js";import"./floating-ui.react-dom-ODH34Sgt.js";import"./index-DwOlKDQm.js";import"./select-D_MCfbK8.js";import"./index-DssjTqXu.js";import"./chevron-up-BMiBX3If.js";import"./TaskController-DRILXs0Z.js";import"./jira-icon-pYe84P2s.js";import"./x-BKkU3iVo.js";import"./loader-circle-D1ym3s0F.js";import"./index-fJEy3cUu.js";import"./trash-2-BRVXkUm4.js";import"./sheet-0Ok6l0ab.js";import"./plus-CeOzYAGh.js";import"./appearance-dropdown-CplWtr1N.js";import"./dropdown-menu-Dy5Hq4rj.js";import"./index-C7hwMZoy.js";import"./checkbox-TCMWq4Ph.js";import"./label-DISzI683.js";import"./settings-Bjly2KGq.js";import"./users-Dah8edja.js";import"./app-logo-icon-DHSG1eGj.js";import"./github-CZtBj8bQ.js";import"./log-out-BQwzfcg9.js";import"./building-BzSs3yfb.js";import"./projector-C9mKpjiA.js";import"./clipboard-list-BccoXVyt.js";import"./timer-BE1bBtuS.js";import"./file-text-D51RJe6F.js";import"./square-check-big-B68kPrbC.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]],J=E("BellOff",G),K=c=>c.replace(/([A-Z])/g,(y,r,x)=>x===0?r:" "+r),Q=[{title:"Dashboard",href:"/dashboard"},{title:"Notifications",href:"/notifications"}];function Xa(){var p,b,f,k,u,v,N,j;const[c,y]=m.useState(!0),[r,x]=m.useState({notifications:{data:[],links:{prev:null,next:null},meta:{current_page:1,last_page:1,from:0,to:0,total:0}},unread_count:0}),[t,A]=m.useState(1),d=async(e=1)=>{try{y(!0);const i=await z.data({page:e});x(i),A(e)}catch{g.error("Failed to fetch notifications")}finally{y(!1)}},$=async e=>{try{await F.call({data:{id:e}}),g.success("Notification marked as read"),await d(t)}catch{g.error("Failed to mark notification as read")}},M=async()=>{try{await I.call({}),g.success("All notifications marked as read"),await d(t)}catch{g.error("Failed to mark all notifications as read")}};return m.useEffect(()=>{d().then()},[]),a.jsxs(S,{breadcrumbs:Q,children:[a.jsx(B,{title:"Notifications"}),a.jsxs("div",{className:"mx-auto flex max-w-5xl flex-col gap-6 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"rounded-full bg-gray-50 p-3 dark:bg-gray-950/30",children:a.jsx(D,{className:"h-5 w-5 text-gray-600 dark:text-gray-400"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-semibold tracking-tight text-gray-900 dark:text-white",children:"Notifications"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:(b=(p=r.notifications)==null?void 0:p.meta)!=null&&b.total?`You have ${r.notifications.meta.total} notifications${r.unread_count?` (${r.unread_count} unread)`:""}`:"Stay updated with your latest activities"})]})]}),(r.unread_count||0)>0&&a.jsxs(n,{onClick:M,className:"gap-2 bg-gray-600 text-sm hover:bg-gray-700 dark:bg-gray-600 dark:hover:bg-gray-500",children:[a.jsx(h,{className:"h-4 w-4"}),"Mark All as Read",a.jsx(C,{variant:"outline",className:"ml-1 border-white/20 bg-white/10 text-white",children:r.unread_count})]})]}),a.jsx(P,{className:"bg-gray-200 dark:bg-gray-700"}),c?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(R,{message:"Loading notifications...",className:"h-40"})}):a.jsxs(a.Fragment,{children:[!((f=r.notifications)!=null&&f.data)||r.notifications.data.length===0?a.jsx(_,{className:"border border-gray-200 bg-white/50 shadow-sm transition-all hover:bg-white dark:border-gray-800 dark:bg-gray-900/50 dark:hover:bg-gray-900",children:a.jsxs("div",{className:"flex flex-col items-center justify-center py-16",children:[a.jsx("div",{className:"mb-4 rounded-full bg-gray-100 p-4 dark:bg-gray-800",children:a.jsx(J,{className:"h-8 w-8 text-gray-400 dark:text-gray-500"})}),a.jsx("h3",{className:"mb-2 text-lg font-medium text-gray-900 dark:text-gray-100",children:"No notifications"}),a.jsx("p",{className:"max-w-md text-center text-sm text-gray-500 dark:text-gray-400",children:"You don't have any notifications at the moment. New notifications will appear here when they arrive."})]})}):a.jsx("div",{className:"space-y-3",children:(k=r.notifications.data)==null?void 0:k.map(e=>{var o;let i=H;return e.type.toLowerCase().includes("timelog")?i=q:e.type.toLowerCase().includes("mail")?i=T:e.type.toLowerCase().includes("alert")&&(i=Z),a.jsxs(_,{className:`overflow-hidden transition-all hover:shadow-md ${e.read_at?"border border-gray-200 bg-white/50 dark:border-gray-800 dark:bg-gray-900/50":"border border-l-4 border-gray-200 border-l-gray-500 bg-white shadow-sm dark:border-gray-800 dark:border-l-gray-500 dark:bg-gray-900"}`,children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-gray-100 p-3 dark:border-gray-800",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:`rounded-full p-1.5 ${e.read_at?"bg-gray-100 text-gray-500 dark:bg-gray-800 dark:text-gray-400":"bg-gray-50 text-gray-600 dark:bg-gray-950/30 dark:text-gray-400"}`,children:a.jsx(i,{className:"h-3.5 w-3.5"})}),a.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-gray-100",children:K(e.type)})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:e.created_at}),!e.read_at&&a.jsx(C,{className:"bg-gray-500 text-white hover:bg-gray-600 dark:bg-gray-600 dark:text-white dark:hover:bg-gray-500",children:"New"})]})]}),a.jsxs("div",{className:"flex items-center justify-between bg-white/50 px-4 py-2.5 dark:bg-gray-900/50",children:[a.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:((o=e.data)==null?void 0:o.message)||"No message content"}),e.read_at?a.jsxs("span",{className:"ml-2 flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400",children:[a.jsx(h,{className:"h-3 w-3"})," Read"]}):a.jsx(n,{variant:"outline",size:"sm",onClick:()=>$(e.id),className:"ml-2 flex-shrink-0 border-gray-200 bg-white/80 text-gray-600 hover:bg-gray-50 hover:text-gray-700 dark:border-gray-700 dark:bg-gray-800/80 dark:text-gray-400 dark:hover:bg-gray-950/30 dark:hover:text-gray-300",children:a.jsx(h,{className:"h-3.5 w-3.5"})})]})]},e.id)})}),((u=r.notifications.meta)==null?void 0:u.last_page)>1&&a.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2",children:[a.jsx(n,{variant:"outline",size:"sm",disabled:!((v=r.notifications.links)!=null&&v.prev),onClick:()=>d(t-1),className:"h-8 w-8 border-gray-200 bg-white/80 text-gray-700 transition-all hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-800/80 dark:text-gray-300 dark:hover:bg-gray-800","aria-label":"Previous page",children:a.jsx(O,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(((N=r.notifications.meta)==null?void 0:N.last_page)||1,5)},(e,i)=>{var w;const o=((w=r.notifications.meta)==null?void 0:w.last_page)||1;let l=[];o<=5?l=Array.from({length:o},(U,L)=>L+1):t<=3?l=[1,2,3,4,o]:t>=o-2?l=[1,o-3,o-2,o-1,o]:l=[1,t-1,t,t+1,o];const s=l[i]||1;return i>0&&l[i]&&l[i-1]&&l[i]-l[i-1]>1?a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"px-1 text-gray-500 dark:text-gray-400",children:"..."}),a.jsx(n,{variant:t===s?"default":"outline",size:"sm",onClick:()=>d(s),className:`h-8 w-8 ${t===s?"bg-gray-600 text-white hover:bg-gray-700 dark:bg-gray-600 dark:text-white dark:hover:bg-gray-500":"border-gray-200 bg-white/80 text-gray-700 hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-800/80 dark:text-gray-300 dark:hover:bg-gray-800"} ${t===s?"pointer-events-none":""}`,"aria-label":`Page ${s}`,"aria-current":t===s?"page":void 0,children:s},s)]},`ellipsis-${i}`):a.jsx(n,{variant:t===s?"default":"outline",size:"sm",onClick:()=>d(s),className:`h-8 w-8 ${t===s?"bg-gray-600 text-white hover:bg-gray-700 dark:bg-gray-600 dark:text-white dark:hover:bg-gray-500":"border-gray-200 bg-white/80 text-gray-700 hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-800/80 dark:text-gray-300 dark:hover:bg-gray-800"} ${t===s?"pointer-events-none":""}`,"aria-label":`Page ${s}`,"aria-current":t===s?"page":void 0,children:s},s)})}),a.jsx(n,{variant:"outline",size:"sm",disabled:!((j=r.notifications.links)!=null&&j.next),onClick:()=>d(t+1),className:"h-8 w-8 border-gray-200 bg-white/80 text-gray-700 transition-all hover:bg-gray-100 dark:border-gray-700 dark:bg-gray-800/80 dark:text-gray-300 dark:hover:bg-gray-800","aria-label":"Next page",children:a.jsx(Y,{className:"h-4 w-4"})})]})]})]})]})}export{Xa as default};
