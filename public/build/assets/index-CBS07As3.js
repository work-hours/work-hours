import{r as d,j as e,H as J,b as M,a as Q}from"./app-CE94QcfB.js";import{T as U}from"./time-log-details-sheet-BDQnvuCG.js";import{B as N}from"./button-CSc-Cw7e.js";import{u as X,c as Y,a as _}from"./index-gOG35dkf.js";import{c as R,R as Z,I as ee}from"./index-C7hwMZoy.js";import{P as te}from"./index-CSGd7LPk.js";import{P as j}from"./index-DkUby8a3.js";import{u as ae}from"./index-DmtIMq0f.js";import{u as re}from"./index-OH_msQzS.js";import{c as C}from"./utils-DKW5XViW.js";import{M as se}from"./master-layout-tsVhh441.js";import oe from"./DayView-Cx_qHu4C.js";import ne from"./MonthView-CkJkFCzY.js";import{e as ie,W as ce}from"./WeekView-Bl_XXVDZ.js";import{C as S}from"./calendar-days-BgdjpWi0.js";import{C as le}from"./chevron-left--yMEEuJA.js";import{C as de}from"./chevron-right-BzTA_0kR.js";import{C as I}from"./calendar-C8zGel57.js";import{f as b,s as me}from"./format-DaJbwain.js";/* empty css            */import"./badge-Do30HICq.js";import"./index-Becnjq-x.js";import"./sheet-0Ok6l0ab.js";import"./index-fJEy3cUu.js";import"./x-BKkU3iVo.js";import"./createLucideIcon-D9NWueAg.js";import"./purify.es-CEVJ7K31.js";import"./clock-CV0oisNo.js";import"./briefcase-BmAm87Tp.js";import"./user-BD4_3ZDB.js";import"./tag-C27JhtJu.js";import"./file-text-D51RJe6F.js";import"./dollar-sign-CD5JibCT.js";import"./circle-check-big-D6zoYCqp.js";import"./info-Im89IFst.js";import"./index-BC-ip4sp.js";import"./floating-ui.react-dom-ODH34Sgt.js";import"./index-DwOlKDQm.js";import"./cookie-consent-CR7wTwap.js";import"./select-D_MCfbK8.js";import"./index-DssjTqXu.js";import"./chevron-up-BMiBX3If.js";import"./TaskController-DRILXs0Z.js";import"./jira-icon-pYe84P2s.js";import"./loader-circle-D1ym3s0F.js";import"./trash-2-BRVXkUm4.js";import"./plus-CeOzYAGh.js";import"./appearance-dropdown-CplWtr1N.js";import"./dropdown-menu-Dy5Hq4rj.js";import"./circle-alert-5FNlBjr8.js";import"./checkbox-TCMWq4Ph.js";import"./label-DISzI683.js";import"./index-C5Svuudg.js";import"./settings-Bjly2KGq.js";import"./bell-CbXQzXBs.js";import"./users-Dah8edja.js";import"./app-logo-icon-DHSG1eGj.js";import"./github-CZtBj8bQ.js";import"./log-out-BQwzfcg9.js";import"./building-BzSs3yfb.js";import"./projector-C9mKpjiA.js";import"./clipboard-list-BccoXVyt.js";import"./timer-BE1bBtuS.js";import"./square-check-big-B68kPrbC.js";import"./parseISO-DbJI0UL_.js";import"./eachDayOfInterval-D6ULaKSU.js";var k="Tabs",[ue,Ct]=Y(k,[R]),L=R(),[pe,D]=ue(k),E=d.forwardRef((s,r)=>{const{__scopeTabs:o,value:c,onValueChange:m,defaultValue:p,orientation:i="horizontal",dir:f,activationMode:h="automatic",...v}=s,u=ae(f),[l,g]=X({prop:c,onChange:m,defaultProp:p??"",caller:k});return e.jsx(pe,{scope:o,baseId:re(),value:l,onValueChange:g,orientation:i,dir:u,activationMode:h,children:e.jsx(j.div,{dir:u,"data-orientation":i,...v,ref:r})})});E.displayName=k;var V="TabsList",A=d.forwardRef((s,r)=>{const{__scopeTabs:o,loop:c=!0,...m}=s,p=D(V,o),i=L(o);return e.jsx(Z,{asChild:!0,...i,orientation:p.orientation,dir:p.dir,loop:c,children:e.jsx(j.div,{role:"tablist","aria-orientation":p.orientation,...m,ref:r})})});A.displayName=V;var P="TabsTrigger",$=d.forwardRef((s,r)=>{const{__scopeTabs:o,value:c,disabled:m=!1,...p}=s,i=D(P,o),f=L(o),h=G(i.baseId,c),v=W(i.baseId,c),u=c===i.value;return e.jsx(ee,{asChild:!0,...f,focusable:!m,active:u,children:e.jsx(j.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":v,"data-state":u?"active":"inactive","data-disabled":m?"":void 0,disabled:m,id:h,...p,ref:r,onMouseDown:_(s.onMouseDown,l=>{!m&&l.button===0&&l.ctrlKey===!1?i.onValueChange(c):l.preventDefault()}),onKeyDown:_(s.onKeyDown,l=>{[" ","Enter"].includes(l.key)&&i.onValueChange(c)}),onFocus:_(s.onFocus,()=>{const l=i.activationMode!=="manual";!u&&!m&&l&&i.onValueChange(c)})})})});$.displayName=P;var F="TabsContent",O=d.forwardRef((s,r)=>{const{__scopeTabs:o,value:c,forceMount:m,children:p,...i}=s,f=D(F,o),h=G(f.baseId,c),v=W(f.baseId,c),u=c===f.value,l=d.useRef(u);return d.useEffect(()=>{const g=requestAnimationFrame(()=>l.current=!1);return()=>cancelAnimationFrame(g)},[]),e.jsx(te,{present:m||u,children:({present:g})=>e.jsx(j.div,{"data-state":u?"active":"inactive","data-orientation":f.orientation,role:"tabpanel","aria-labelledby":h,hidden:!g,id:v,tabIndex:0,...i,ref:r,style:{...s.style,animationDuration:l.current?"0s":void 0},children:g&&p})})});O.displayName=F;function G(s,r){return`${s}-trigger-${r}`}function W(s,r){return`${s}-content-${r}`}var fe=E,z=A,B=$,H=O;const ge=fe,K=d.forwardRef(({className:s,...r},o)=>e.jsx(z,{ref:o,className:C("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...r}));K.displayName=z.displayName;const x=d.forwardRef(({className:s,...r},o)=>e.jsx(B,{ref:o,className:C("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",s),...r}));x.displayName=B.displayName;const y=d.forwardRef(({className:s,...r},o)=>e.jsx(H,{ref:o,className:C("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...r}));y.displayName=H.displayName;function Dt({timeLogs:s,view:r="month",date:o,period:c}){const[m,p]=d.useState(null),[i,f]=d.useState(!1),[h,v]=d.useState(null),[u,l]=d.useState(r);d.useEffect(()=>{l(r)},[r]);const g=a=>{l(a),M.get(route("calendar.index"),{view:a,date:o},{preserveState:!0,preserveScroll:!0})},w=a=>{M.get(route("calendar.index"),{view:r,date:a},{preserveState:!0,preserveScroll:!0})},T=a=>{p(a),Q.get(route("calendar.detail",a)).then(n=>{const t=n.data,q={id:t.id,project_name:t.project?t.project.name:null,project_id:t.project?t.project.id:void 0,start_timestamp:t.start_timestamp,end_timestamp:t.end_timestamp,duration:t.duration,is_paid:t.is_paid||!1,hourly_rate:t.hourly_rate,currency:t.currency,note:t.note||"",status:t.status?t.status.toLowerCase():"pending",user_name:t.user?t.user.name:void 0,task_title:t.task?t.task.title:void 0,task_status:t.task?t.task.status:void 0,task_priority:t.task?t.task.priority:void 0,task_due_date:t.task?t.task.due_date:null,task_description:t.task?t.task.description:null,comment:t.comment||"",approved_by:t.approved_by||void 0,approver_name:t.approver_name||void 0,user_non_monetary:t.user_non_monetary||!1,paid_amount:t.paid_amount};v(q),f(!0)}).catch(n=>{console.error("Error fetching time log details:",n)})};return e.jsxs(se,{children:[e.jsx(J,{title:"Calendar"}),e.jsxs("div",{className:"container p-4",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Calendar"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(N,{variant:"outline",size:"sm",className:"dark:hover:bg-gray-750 flex items-center gap-1 bg-white shadow-sm hover:bg-gray-50 dark:bg-gray-800",onClick:()=>{const a=new Date().toISOString().split("T")[0];w(a)},children:[e.jsx(S,{className:"h-4 w-4"}),"Today"]}),e.jsxs("div",{className:"flex rounded-md shadow-sm",children:[e.jsxs(N,{variant:"outline",size:"sm",className:"dark:hover:bg-gray-750 rounded-r-none border-r-0 bg-white hover:bg-gray-50 dark:bg-gray-800",onClick:()=>{const a=new Date(o);let n;switch(r){case"month":n=new Date(a.setMonth(a.getMonth()-1));break;case"week":n=new Date(a.setDate(a.getDate()-7));break;case"day":default:n=new Date(a.setDate(a.getDate()-1));break}w(n.toISOString().split("T")[0])},children:[e.jsx(le,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Previous"})]}),e.jsxs(N,{variant:"outline",size:"sm",className:"dark:hover:bg-gray-750 rounded-l-none bg-white hover:bg-gray-50 dark:bg-gray-800",onClick:()=>{const a=new Date(o);let n;switch(r){case"month":n=new Date(a.setMonth(a.getMonth()+1));break;case"week":n=new Date(a.setDate(a.getDate()+7));break;case"day":default:n=new Date(a.setDate(a.getDate()+1));break}w(n.toISOString().split("T")[0])},children:[e.jsx(de,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Next"})]})]})]})]}),e.jsx("div",{className:"mb-4 text-center",children:e.jsx("h2",{className:"text-xl font-semibold",children:(()=>{const a=new Date(o);switch(r){case"month":return b(a,"MMMM yyyy");case"week":const n=me(a),t=ie(a);return b(n,"MMM")===b(t,"MMM")?b(n,"MMMM yyyy"):`${b(n,"MMM d")} - ${b(t,"MMM d, yyyy")}`;case"day":return b(a,"MMMM d, yyyy");default:return""}})()})}),e.jsxs(ge,{defaultValue:r,onValueChange:g,children:[e.jsxs(K,{className:"mb-4 rounded-lg border border-gray-200 bg-white p-1 shadow-sm dark:border-gray-700 dark:bg-gray-800",children:[e.jsxs(x,{value:"month",className:"flex items-center gap-2 px-4 py-2",children:[e.jsx(S,{className:"h-4 w-4"}),"Month"]}),e.jsxs(x,{value:"week",className:"flex items-center gap-2 px-4 py-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Week"]}),e.jsxs(x,{value:"day",className:"flex items-center gap-2 px-4 py-2",children:[e.jsx(I,{className:"h-4 w-4"}),"Day"]})]}),e.jsx(y,{value:"month",children:e.jsx(ne,{timeLogs:s,date:o,onTimeLogClick:T,onSwitchToDay:a=>{M.get(route("calendar.index"),{view:"day",date:a},{preserveState:!0})}})}),e.jsx(y,{value:"week",children:e.jsx(ce,{timeLogs:s,date:o,onTimeLogClick:T})}),e.jsx(y,{value:"day",children:e.jsx(oe,{timeLogs:s,date:o,onTimeLogClick:T})})]})]}),e.jsx(U,{timeLog:h,open:i,onOpenChange:f})]})}export{Dt as default};
